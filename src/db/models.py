from __future__ import annotationsfrom sqlalchemy import Float, Integer, Text, ForeignKey, Indexfrom sqlalchemy.orm import DeclarativeBase, Mapped, mapped_columnclass Base(DeclarativeBase):    passclass RawApiResponse(Base):    __tablename__ = "raw_api_responses"    id: Mapped[int] = mapped_column(Integer, primary_key=True, autoincrement=True)    fetched_at: Mapped[str] = mapped_column(Text, nullable=False)    source: Mapped[str] = mapped_column(Text, nullable=False)    endpoint: Mapped[str] = mapped_column(Text, nullable=False)    payload_json: Mapped[str] = mapped_column(Text, nullable=False)Index("idx_raw_api_responses_fetched_at", RawApiResponse.fetched_at)Index("idx_raw_api_responses_source_endpoint", RawApiResponse.source, RawApiResponse.endpoint)class Product(Base):    __tablename__ = "products"    product_id: Mapped[int] = mapped_column(Integer, primary_key=True)    title: Mapped[str] = mapped_column(Text, nullable=False)    brand: Mapped[str | None] = mapped_column(Text, nullable=True)    category: Mapped[str | None] = mapped_column(Text, nullable=True)    last_seen_at: Mapped[str] = mapped_column(Text, nullable=False)Index("idx_products_last_seen_at", Product.last_seen_at)class PriceHistory(Base):    __tablename__ = "prices_history"    id: Mapped[int] = mapped_column(Integer, primary_key=True, autoincrement=True)    product_id: Mapped[int] = mapped_column(Integer, ForeignKey("products.product_id"), nullable=False)    fetched_at: Mapped[str] = mapped_column(Text, nullable=False)    price: Mapped[float] = mapped_column(Float, nullable=False)    currency: Mapped[str] = mapped_column(Text, nullable=False)Index("idx_prices_history_product_id_fetched_at", PriceHistory.product_id, PriceHistory.fetched_at)class ChatSetting(Base):    __tablename__ = "chat_settings"    chat_id: Mapped[int] = mapped_column(Integer, primary_key=True)    default_threshold_percent: Mapped[float] = mapped_column(Float, nullable=False)    updated_at: Mapped[str] = mapped_column(Text, nullable=False)class Subscription(Base):    __tablename__ = "subscriptions"    chat_id: Mapped[int] = mapped_column(Integer, primary_key=True)    product_id: Mapped[int] = mapped_column(Integer, primary_key=True)    threshold_percent: Mapped[float] = mapped_column(Float, nullable=False)    is_active: Mapped[int] = mapped_column(Integer, nullable=False, default=1)    created_at: Mapped[str] = mapped_column(Text, nullable=False)Index("idx_subscriptions_chat_active", Subscription.chat_id, Subscription.is_active)Index("idx_subscriptions_active", Subscription.is_active)